{% extends 'base.html' %}
{% block content %}
<h2>Your Shopping Cart</h2>
<table class="table table-striped mt-4">
    <thead>
    <tbody>
        {% for item in cart %}
        <tr class="align-middle">
            <td>
                <div class="d-flex align-items-center">
                    {% if item.product.image %}
                    <img src="{{ item.product.image.url }}" class="rounded me-3"
                        style="width: 50px; height: 50px; object-fit: cover;">
                    {% endif %}
                    <span class="fw-bold">{{ item.product.name }}</span>
                </div>
            </td>
            <td style="width: 150px;">
                <form action="{% url 'cart_add' item.product.id %}" method="post">
                    {% csrf_token %}
                    <div class="input-group input-group-sm">
                        <input type="number" name="quantity" value="{{ item.quantity }}" min="1"
                            class="form-control text-center">

                        <input type="hidden" name="override" value="True">

                        <button type="submit" class="btn btn-outline-secondary"><i
                                class="bi bi-arrow-clockwise"></i></button>
                    </div>
                </form>
            </td>
            <td>Ksh{{ item.price }}</td>
            <td class="fw-bold">Ksh{{ item.total_price }}</td>
            <td>
                <a href="{% url 'cart_remove' item.product.id %}" class="btn btn-sm btn-outline-danger border-0">
                    <i class="bi bi-trash-fill"></i>
                </a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<div class="d-flex justify-content-end gap-2">
    <a href="{% url 'product_list' %}" class="btn btn-secondary">Continue Shopping</a>
    <a href="{% url 'checkout' %}" class="btn btn-success-custom">Proceed to Checkout</a>
</div>
{% endblock %}